<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8">
		<title>OkayGIS</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="renderer" content="webkit">
		<meta http-equiv="Cache-Control" content="no-transform" />
		<meta http-equiv="Cache-Control" content="no-siteapp" />
		<link href="/static/web/css/common.css" rel="stylesheet" type="text/css"/>
		<link href="//at.alicdn.com/t/font_594178_jlbqbsd917.css" rel="stylesheet" type="text/css"/>
		<link rel="shortcut icon" href="/static/favicon.ico">
		<!--[if lt IE 9]>

    	<![endif]-->
        <style>
            .nav li{
                text-align: center;
                float: left;
                list-style: none;
                font-size: 28px;
                margin: 10px 30px;
            }
            .nav li a{
                text-decoration: none;
            }
        </style>
	</head>
<body>
<div class="header">
	<div class="wrap">
		<ul class="nav">
			<li><a href={% url 'index' %}>首页</a></li>
			<li><a href="/models">模型</a></li>
			<li><a href="/bbs/index.html?action=cat&type=3" target="_blank">教程</a></li>
			<li><a href="/bbs/index.html" target="_blank">社区</a></li>
		</ul>
		<div class="header-r">
			<div class="mulogin">
							<a href={% url 'user_login' %}>登录</a> | <a href={% url 'user_register' %}>注册</a>| <a href={% url 'user_logout' %}>登出</a>
			</div>
		</div>
	</div>
</div>


<script type="text/javascript" src="/static/web/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="/static/web/js/layer.js"></script>
<script type="text/javascript">
$(function(){

$('.header-user-menu').hover(function(){
	$('.header-user-menu-sub').show();
},function(){
	$('.header-user-menu-sub').hide();
});

//打开消息盒子
$('#js-tongzhi-icon').click(function(){
	var dom = $('.header-tongzhi-box');
	if(dom.css('display')=='none'){
		dom.show();
        $.ajax({
            type:'POST',
            url:'/user/saveMessage.html',
            dataType:'json',
            success:function(data){
                //成功 data.code = 0
            },
            error:function(jqXHR){
                layer.msg('服务器繁忙，请稍后再试');
            }
        });
	}else{
		dom.hide();
	}
});

//点击其它地方关闭消息盒子
$(document).on('click',function(e) {
    var clickme = $(e.target);  
    if (!clickme.parents().hasClass("header-tongzhi-box") && !clickme.hasClass("icon-tongzhi")) {
    	$('.header-tongzhi-box').hide();
    }
 }); 

//禁止父级滚动
$.fn.scrollUnique = function() {
    return $(this).each(function() {
        var eventType = 'mousewheel';
        // 火狐是DOMMouseScroll事件
        if (document.mozHidden !== undefined) {
            eventType = 'DOMMouseScroll';
        }
        $(this).on(eventType, function(event) {
            // 一些数据
            var scrollTop = this.scrollTop,
                scrollHeight = this.scrollHeight,
                height = this.clientHeight;

            var delta = (event.originalEvent.wheelDelta) ? event.originalEvent.wheelDelta : -(event.originalEvent.detail || 0);        

            if ((delta > 0 && scrollTop <= delta) || (delta < 0 && scrollHeight - height - scrollTop <= -1 * delta)) {
                // IE浏览器下滚动会跨越边界直接影响父级滚动，因此，临界时候手动边界滚动定位
                this.scrollTop = delta > 0? 0: scrollHeight;
                // 向上滚 || 向下滚
                event.preventDefault();
            }        
        });
    });	
};

$('.header-tongzhi-list').scrollUnique();



//全站小问号提示
var tips;
$(".js-yiwen").hover(
  function () {
  	var selector = $(this).prop('id');
  	var txt = $('#'+selector+'Tips').html(); // 每个提示都有text/html模版
    tips = layer.tips(txt, '#'+selector,{tips: [1,'#282828'],time:0});
  },
  function () {
    layer.close(tips);
  }
);

});

//百度统计
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?b073673d4c939027f93b0a75ee6e053b";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();

</script>

<!--站长统计-->
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1274147141'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1274147141%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>



<script type="text/javascript" src="/static/web/js/jquery.mouseslide.min.js"></script>
<script type="text/javascript">
$(function(){
	$(".js-mouseslide").mouseslide({
		height: '395px',
		widthExpand: true,
		mirror: false
	});
})
</script>
</body>
</html>
