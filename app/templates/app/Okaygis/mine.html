{% load static %}
<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Blog</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'app/img/logo512.png' %}">

    <!-- All css files are included here. -->
    <!-- Bootstrap fremwork main css -->
    <link rel="stylesheet" href="{% static 'Okaygis/css/bootstrap.min.css' %}">
    <!-- This core.css file contents all plugings css file. -->
    <link rel="stylesheet" href="{% static 'Okaygis/css/core.css' %}">
    <!-- Theme shortcodes/elements style -->
    <link rel="stylesheet" href="{% static 'Okaygis/css/shortcode/shortcodes.css' %}">
    <!-- Theme main style -->
    <link rel="stylesheet" href="{% static 'Okaygis/style.css' %}">
    <!-- Responsive css -->
    <link rel="stylesheet" href="{% static 'Okaygis/css/responsive.css' %}">
    <!-- Style customizer (Remove these two lines please) -->
    <link rel="stylesheet" href="{% static 'Okaygis/css/style-customizer.css' %}">
    <link href="#" data-style="styles" rel="stylesheet">

    <!-- Modernizr JS -->
{#    <script src="static/Okaygis/js/vendor/modernizr-2.8.3.min.js"></script>#}
    <style>
        #project{
            width: 100%;height: 152px;padding: 4px;background: darkgrey;margin-top: 10px;
            border-radius: 10px;
        }
        #project img{
            float: left;height: 144px;margin-left:0;
        }
        .project-info{
            width: 80%;float: right;height: 144px;margin-left: 10px
        }
        .project-info li{
            height: 48px;
        }
        .project-info li button{
            height: 48px;color: black;float: right;margin-right: 20px;
        }
        .project-info li p{
            float: left;height: 48px;line-height: 48px;
            margin: 0;
        }
    </style>
</head>

<body>
<!--[if lt IE 8]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
<!-- Body main wrapper start -->
<div class="wrapper">
    <!-- Start of header area -->
    <header class="header-area">
        <div class="header-top navy-bg ptb-20">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 col-sm-6 col-xs-12">
                        <div class="header-top-info">
                            <ul>
                                <li>
                                    <a href="#">
                                        <i class="icofont icofont-ui-call"></i>
                                        热线电话 16602035452
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="icofont icofont-envelope"></i>
                                        邮箱 duanlerong@live.com
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6 hidden-xs">
                        <div class="header-top-right f-right">
                            <div class="header-top-language f-left">
                                <ul>
                                    <li><a href="#" data-toggle="dropdown">{{ request.myuser }}<i
                                            class="icofont icofont-simple-down"></i></a>
                                        <ul class="dropdown-menu">
                                            <li><a href="/user/mine">我的模型</a></li>
                                            <li><a href="#">我的钱包</a></li>
                                            <li><a href="#">我的设置</a></li>
                                            <li><a href="/user/logout">登出</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-bottom stick-h2">
            <div class="container">
                <div class="row">
                    <div class="col-md-4 col-sm-12 col-xs-12">
                        <div class="logo">
                            {#                                <a href="index.html"><img src="static/Okaygis/images/logo/logo.png" alt=""> </a>#}
                        </div>
                    </div>
                    <div class="col-md-8 hidden-sm hidden-xs">
                        <div class="menu-area f-right">
                            <nav>
                                <ul>
                                    <li><a href="{% url 'index' %}">首页</a></li>
                                    <li><a href="{% url 'model' %}">模型</a></li>
                                    <li><a href="#">教程</a></li>
                                    <li><a href="#">社区</a></li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- mobile-menu-area start -->
    <div class="mobile-menu-area">
        <div class="container">
            <div class="row">
                <div class="hidden-lg hidden-md col-sm-12 col-xs-12">
                </div>
            </div>
        </div>
    </div>
    <!-- mobile-menu-area end -->
    <!-- End of header area -->
    <section class="breadcrumbs-area bg-3 ptb-110 bg-opacity bg-relative">
        <div class="container">
            <div class="row">
                <div class="col-md-12 text-center">
                    <div class="breadcrumbs">
                        <a href=""><h2 class="page-title">新建项目</h2></a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="event-area ptb-110">
        <div class="container">
            <div class="nav-li" style="width: 10%;float: left;">
                <ul style="border-right: 1px solid grey;">
                    <li><a href="#" style="height: 50px;width: 100%;color: black;line-height: 50px;text-align: center">我的模型</a>
                    </li>
                    <li><a href="#" style="height: 50px;width: 100%;color: black;line-height: 50px;text-align: center">我的钱包</a>
                    </li>
                    <li><a href="#" style="height: 50px;width: 100%;color: black;line-height: 50px;text-align: center">我的设置</a>
                    </li>
                </ul>
            </div>
            <div class="mine-content" style="width: 90%;float: right;">
                <div class="nav-detail" style="height: 40px;">
                    <P style="height: 39px;width: 80px; float: left;text-align: center;line-height: 39px;font-size: 18pxpx;">
                        模型状态：</P><input type="text" style="width: 100px; float: left;height: 39px;">

                    <!-- Split button -->
                    <div class="btn-group">
                      <button type="button" class="btn btn-danger">全部</button>
                      <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="caret"></span>
                        <span class="sr-only">Toggle Dropdown</span>
                      </button>
                      <ul class="dropdown-menu">
                        <li><a id = 'filter_project_false'>已完成</a></li>
                        <li><a id = 'filter_project_true'>未完成</a></li>
                      </ul>
                    </div>


                    <button type="button" onclick="" id="search"
                            style="color: black;float: right; width: 100px;height: 40px;">Search
                    </button>

                    <input type="text" style="float: right; width: 100px;height: 39px;" id="search">
                </div>
                <p id="filter_cookie" filter="lol"></p>
                <div id="project_list"></div>
{#                <div id="project">#}
{#                    <img src="{% static 'app/img/logo512.png' %}" alt="icon">#}
{#                    <div class="project-info">#}
{#                        <li><p id="project_name">ProjectName</p></li>#}
{#                        <li><p>ProjectCreatedAt</p></li>#}
{#                        <li><p>ProjectsLabel</p>#}
{#                            <button>Delete</button>#}
{#                            <button>Continue</button>#}
{#                        </li>#}
{#                    </div>#}
{#                </div>#}
                <nav aria-label="Page navigation">
                    <ul class="pagination">
{#                        <li>#}
{#                            <a href="#" aria-label="Previous">#}
{#                                <span aria-hidden="true">&laquo;</span>#}
{#                            </a>#}
{#                        </li>#}
{##}
{#                        <li>#}
{#                            <a href="#" aria-label="Next">#}
{#                                <span aria-hidden="true">&raquo;</span>#}
{#                            </a>#}
{#                        </li>#}
                    </ul>
                </nav>
            </div>
        </div>
    </div>
    <footer class="footer-area">
        <div class="footer-top ptb-110 navy-bg">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <div class="footer-logo-address">
                            <div class="footer-logo">
                                <a href="#"><img src="{% static 'app/img/logo512.png' %}" alt=""
                                                 style="height: 50px;width: 50px;"></a>
                            </div>
                            <div class="footer-address">
                                <div class="header-top-info">
                                    <ul>
                                        <li>
                                            <a href="#">
                                                <i class="icofont icofont-ui-call"></i>
                                                热线电话 16602035452
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <i class="icofont icofont-envelope"></i>
                                                邮箱 duanlerong@live.com
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <i class="icofont icofont-location-pin"></i>
                                                科学城科学大道162号创意大厦B214层
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <div class="footer-bottom-text ptb-20">
                            <p>
                                Copyright &copy; 2017.Company name All rights reserved.More Templates <a
                                    href="http://www.okaygis.com/" target="_blank" title="">欧科信息科技有限公司</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</div>
<!-- Body main wrapper end -->


<!-- Placed js at the end of the document so the pages load faster -->
<!-- jquery latest version -->
<script src="{% static "Okaygis/js/vendor/jquery-1.12.0.min.js" %}"></script>
<!-- Bootstrap framework js -->
<script src="{% static 'Okaygis/js/bootstrap.min.js' %}"></script>
<!-- ajax-mail JS
============================================ -->
<script src="{% static 'Okaygis/js/ajax-mail.js' %}"></script>
<!-- All js plugins included in this file. -->
<script src="{% static 'Okaygis/js/plugins.js' %}"></script>
<script src="{% static 'Okaygis/js/main.js' %}"></script>
<script>
    $(document).ready(function () {
        $.get(
            "/api/my_projects/",
            function (data) {
                console.log(data);
                new_project(data);
                new_li(data);
            }
        );
    });

    function new_project(data) {
        for (let i in data.results) {
            let project_info = "<div id=\"project\">\n<img src=\""+data.results[i].cover+"\"" + " alt=\"icon\">\n<div class=\"project-info\">\n" +
                        "<li><p id=\"project_name\">" + data.results[i].name + "</p></li>\n<li><p>" + data.results[i].created_at.substring(0, 10) + "</p></li>\n" +
                        "<li><p>ProjectLabel</p><button>Delete</button><button>Continue</button></li>\n" +
                        "</div>\n</div>";
            $("#project_list").append(project_info)
        }

    }

    function new_li(data) {
        $(".pagination").empty();
        let pagenum = data.count%3 ? parseInt(data.count/3)+1 : data.count/3;
        for(let i=0;i<pagenum;i++){
            let page_li = "<li><a onclick=\"pg(this)\""+"page="+"loo"+">"+(i+1)+"</a></li>";
            console.log(i);
            $(".pagination").append(page_li);
        }
    }

    function pg (data) {
        let page = parseInt(data.innerHTML);
        let filter = $("#filter_cookie").attr('filter');
        let filter_data = filter==='lol' ? {"page": page,}:{"page": page,"deleting":filter};
        $.ajax({
            url:"/api/my_projects/",
            data:filter_data,
            success:function (data) {
                console.log(data);
                $("#project_list").empty();
                new_project(data);
                new_li(data);
            }
        })
    };

    $("#filter_project_true").click(function () {
        $("#filter_cookie").attr('filter','true');
        $.ajax({
            url:"/api/my_projects/",
            data:{
                'deleting':$("#filter_cookie").attr('filter'),
            },
            success:function (data) {
                $("#project_list").empty();
                new_project(data);
                new_li(data);
            }
        })
    })
    $("#filter_project_false").click(function () {
        $("#filter_cookie").attr('filter','false');
        $.ajax({
            url:"/api/my_projects/",
            data:{
                'deleting':$("#filter_cookie").attr('filter'),
            },
            success:function (data) {
                $("#project_list").empty();
                new_project(data);
                new_li(data);
            }
        })
    })
</script>

</body>

</html>
